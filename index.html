<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <!-- Mobile-optimized viewport -->
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes, viewport-fit=cover"
    />
    <meta name="csrf-token" content="demo-csrf-token-12345" />

    <!-- Mobile browser optimizations -->
    <meta name="theme-color" content="#059669" />
    <meta name="msapplication-navbutton-color" content="#059669" />
    <meta name="apple-mobile-web-app-status-bar-style" content="default" />
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-title" content="Waste Finder" />

    <!-- SEO and social meta tags -->
    <meta
      name="description"
      content="Find dumpster rentals, waste disposal locations, and junk removal services near you. Compare prices and book local waste management services online."
    />
    <meta
      name="keywords"
      content="dumpster rental, junk removal, waste disposal, landfill, recycling center, transfer station, waste management, garbage disposal, dumpster near me"
    />

    <!-- Performance optimizations -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link rel="dns-prefetch" href="https://maps.googleapis.com" />
    <link rel="dns-prefetch" href="https://www.google.com" />

    <!-- Optimized font loading - load asynchronously -->
    <link rel="preload" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" as="style" onload="this.onload=null;this.rel='stylesheet'" />
    <noscript><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" /></noscript>

    <title>Waste Finder - Landfill & Transfer Station Locator</title>

    <!-- PWA Manifest -->
    <link rel="manifest" href="/manifest.json" />

    <!-- Apple PWA meta tags -->
    <link rel="apple-touch-icon" href="/icon-192x192.png" />
    <meta name="apple-mobile-web-app-title" content="Dump Near Me" />

    <!-- PWA Manifest -->
    <link rel="manifest" href="/manifest.json" />

    <!-- Additional performance optimizations -->
    <meta name="color-scheme" content="light" />
    <link
      rel="preload"
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap"
      as="style"
      crossorigin
    />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap"
      media="print"
      onload="this.media='all'"
    />

    <!-- Mobile optimizations -->
    <style>
      html {
        -webkit-text-size-adjust: 100%;
        -moz-text-size-adjust: 100%;
        -ms-text-size-adjust: 100%;
        text-size-adjust: 100%;
      }

      /* Improve tap highlighting */
      * {
        -webkit-tap-highlight-color: rgba(59, 130, 246, 0.1);
      }

      /* Better scrolling on iOS */
      body {
        -webkit-overflow-scrolling: touch;
        overscroll-behavior-y: contain;
        /* Fix iOS Safari header positioning */
        position: relative;
        overflow-x: hidden;
      }

      /* iOS Safari sticky header support */
      @supports (-webkit-touch-callout: none) {
        html {
          height: -webkit-fill-available;
        }
        body {
          height: -webkit-fill-available;
        }
      }

      /* Loading state */
      #root {
        min-height: 100vh;
      }

      /* Critical CSS for above-the-fold content */
      body {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
        line-height: 1.6;
        color: #1f2937;
        background-color: #ffffff;
      }

      /* Font loading optimization */
      @font-face {
        font-family: 'Inter';
        font-display: swap;
        src: local('Inter');
      }

      /* Use Inter when loaded, fallback to system fonts */
      .font-inter {
        font-family: 'Inter', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
      }

      /* Header critical styles */
      .header-container {
        position: sticky;
        top: 0;
        z-index: 50;
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(10px);
        border-bottom: 1px solid #e5e7eb;
      }

      /* Button critical styles */
      .btn-primary {
        background-color: #059669;
        color: white;
        padding: 0.5rem 1rem;
        border-radius: 0.375rem;
        font-weight: 500;
        border: none;
        cursor: pointer;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        transition: background-color 0.15s ease;
      }

      .btn-primary:hover {
        background-color: #047857;
      }

      /* Layout critical styles */
      .container-critical {
        max-width: 1200px;
        margin: 0 auto;
        padding: 0 1rem;
      }

      /* Flexbox utilities */
      .flex { display: flex; }
      .items-center { align-items: center; }
      .justify-center { justify-content: center; }
      .justify-between { justify-content: space-between; }

      /* Text utilities */
      .text-xl { font-size: 1.25rem; line-height: 1.75rem; }
      .text-lg { font-size: 1.125rem; line-height: 1.75rem; }
      .font-semibold { font-weight: 600; }
      .font-medium { font-weight: 500; }

      /* Fix for iOS Safari bottom bar */
      .min-h-screen {
        min-height: 100vh;
        min-height: -webkit-fill-available;
      }

      /* Touch-friendly minimum sizes */
      button,
      input[type="button"],
      input[type="submit"],
      a {
        min-height: 44px;
        min-width: 44px;
      }

      /* Prevent zoom on form inputs (iOS) */
      input,
      textarea,
      select {
        font-size: 16px;
      }
    </style>
  </head>

  <body>
    <div id="root"></div>

    <!-- Block FullStory to prevent router conflicts -->
    <script>
      // Disable FullStory completely
      if (window.FS) {
        window.FS.shutdown();
        delete window.FS;
      }
      // Block FullStory loading
      window._fs_disabled = true;
      window._fs_debug = false;

      // Handle direct URL access for HashRouter
      (function () {
        const path = window.location.pathname;
        if (path !== "/" && !window.location.hash) {
          // Redirect paths like /pricing-calculator to #/pricing-calculator
          window.location.replace("/#" + path);
        }
      })();
    </script>

    <!-- Service Worker registration -->
    <script>
      if ("serviceWorker" in navigator) {
        window.addEventListener("load", () => {
          navigator.serviceWorker
            .register("/sw.js")
            .then((registration) => console.log("SW registered"))
            .catch((error) => console.log("SW registration failed"));
        });
      }
    </script>

    <script type="module" src="/client/main.tsx"></script>
  </body>
</html>
